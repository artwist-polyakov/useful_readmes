# üß† n8n –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Å –¥–æ–º–µ–Ω–æ–º, HTTPS –∏ –±—ç–∫–∞–ø–∞–º–∏

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é `n8n` –Ω–∞ VPS —Å Ubuntu, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–æ–º–µ–Ω–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –±—ç–∫–∞–ø–æ–º –¥–∞–Ω–Ω—ã—Ö. –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞.

---

## üõ†Ô∏è –ß—Ç–æ –±—É–¥–µ—Ç –≤ –∏—Ç–æ–≥–µ:

- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä n8n, –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–æ `https://n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru` (–º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –∏–Ω–æ–π –ø–æ–¥–¥–æ–º–µ–Ω, –Ω–∞ —Å–≤–æ–π –≤–∫—É—Å, –Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±—É–¥–µ—Ç —Ç–∞–∫–æ–π)
- HTTPS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ nginx
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Nginx ‚Äî —É–ª—É—á—à–∏—Ç —Ä–∞–±–æ—Ç—É –≤–æ—Ä–∫—Ñ–ª–æ—É —Å —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å —Ñ–∞–π–ª–∞–º–∏.

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- VPS —Å Ubuntu 20+ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2 –ì–ë RAM). –õ–∏—á–Ω–æ —è –±–µ—Ä—É —Å–µ—Ä–≤–µ—Ä—ã —Ç—É—Ç [VDSina.com ‚Äî –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è —Å—ã–ª–∫–∞ 10% –±–æ–Ω—É—Å –∫ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—é](https://www.vdsina.com/?partner=1r8tcykewa) –∏–ª–∏ [Firstbyte](https://firstbyte.ru/?from=196382)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker
- –î–æ–º–µ–Ω + –¥–æ—Å—Ç—É–ø –∫ DNS (—è –¥–µ—Ä–∂—É –¥–æ–º–µ–Ω—ã –≤ reg.ru)

---

## üîß 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–æ–º:

```
n8n     A     <–í–Ω–µ—à–Ω–∏–π IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞>
```

---

## üê≥ 2. –ó–∞–ø—É—Å–∫ n8n —á–µ—Ä–µ–∑ Docker

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ SSH —è –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é —É—Ç–∏–ª–∏—Ç—É [Termius](https://termius.com).
–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥—É—é–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Docker: [–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞ –æ—Ñ —Å–∞–π—Ç–µ](https://docs.docker.com/engine/install/ubuntu/)


–°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è –¥–∞–Ω–Ω—ã—Ö:

```bash
mkdir -p ~/n8n_data
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker run -d --restart unless-stopped \
  --name n8n \
  -p 5678:5678 \
  -v ~/n8n_data:/home/node/.n8n \
  -e N8N_HOST="n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru" \
  -e WEBHOOK_TUNNEL_URL="https://n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru/" \
  -e WEBHOOK_URL="https://n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru/" \
  n8nio/n8n
```

**–í–∞–∂–Ω–æ**: –µ—Å–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–∞–ø–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞:

```bash
sudo chown -R 1000:1000 ~/n8n_data
sudo chmod -R u+rwX ~/n8n_data
```

---

## üåê 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nginx –∏ certbot:

```bash
sudo apt update
sudo apt install nginx certbot python3-certbot-nginx
```

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª:

```bash
sudo nano /etc/nginx/sites-available/n8n.conf
```

–í—Å—Ç–∞–≤—å—Ç–µ:

```nginx
server {
    listen 443 ssl;
    server_name n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru;

    ssl_certificate     /etc/letsencrypt/live/n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru/privkey.pem;
    include             /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam         /etc/letsencrypt/ssl-dhparams.pem;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";
    add_header X-XSS-Protection "1; mode=block";
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

    location / {
        proxy_pass http://localhost:5678;
        proxy_http_version 1.1;

        proxy_buffering on;
        proxy_buffers 8 256k;
        proxy_buffer_size 128k;
        proxy_busy_buffers_size 512k;
        proxy_max_temp_file_size 0;

        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}

server {
    listen 80;
    server_name n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru;

    return 301 https://$host$request_uri;
}
```

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–∞–π—Ç:

```bash
sudo ln -s /etc/nginx/sites-available/n8n.conf /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

---

## üîí 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ HTTPS

```bash
sudo certbot --nginx -d n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

Let's Encrypt –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –≤–∫–ª—é—á–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ.

---

## üíæ 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É:

```bash
mkdir -p ~/n8n_backups
```

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
sudo nano /usr/local/bin/n8n-backup.sh
```

–í—Å—Ç–∞–≤—å—Ç–µ:

```bash
#!/bin/bash

SRC_DIR="$HOME/n8n_data"
BACKUP_DIR="$HOME/n8n_backups"
BACKUP_FILE="$BACKUP_DIR/n8n-backup-$(date +%F-%H%M%S).tar.gz"

tar -czf "$BACKUP_FILE" -C "$SRC_DIR" .
ls -1t "$BACKUP_DIR"/n8n-backup-*.tar.gz | tail -n +8 | xargs -r rm --
echo "[$(date)] Backup created: $BACKUP_FILE"
```

–°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x /usr/local/bin/n8n-backup.sh
```

–î–æ–±–∞–≤—å—Ç–µ –≤ `cron` (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00):

```bash
crontab -e
```

–ò –¥–æ–±–∞–≤—å—Ç–µ:

```
0 3 * * * /usr/local/bin/n8n-backup.sh >> $HOME/n8n_backups/backup.log 2>&1
```

---

## üì¶ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å:

- `n8n` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `https://n8n.–≤–∞—à-–¥–æ–º–µ–Ω.ru`
- –ï—Å—Ç—å HTTPS –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `~/n8n_data`
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è –±—ç–∫–∞–ø—ã –≤ `~/n8n_backups`

---

## üß† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- –†—É—á–Ω–æ–π –±—ç–∫–∞–ø: `n8n-backup.sh`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx: `sudo nginx -t`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx: `sudo systemctl reload nginx`
- –õ–æ–≥–∏ n8n: `docker logs -f n8n`
